DROP TABLE IF EXISTS ANNOUNCEMENTS CASCADE;
CREATE TABLE ANNOUNCEMENTS (
	ID UUID PRIMARY KEY,
	CATEGORY VARCHAR(128),
	POST_DATE_TIME TIMESTAMP WITH TIME ZONE NOT NULL,
	EXPIRE_DATE_TIME TIMESTAMP WITH TIME ZONE,
	DISPLAY_PRIORITY INT NOT NULL,
	CREATED_AT TIMESTAMP WITH TIME ZONE NOT NULL,
	CHANGED_AT TIMESTAMP WITH TIME ZONE NOT NULL,
	IS_DELETED BOOLEAN NOT NULL
);

DROP TABLE IF EXISTS ANNOUNCEMENT_CONTENTS CASCADE;
CREATE TABLE ANNOUNCEMENT_CONTENTS (
    ID UUID PRIMARY KEY,
    ANNOUNCEMENT_ID UUID NOT NULL,
    LANGUAGE_CODE VARCHAR(8) NOT NULL,
    TITLE VARCHAR(256) NOT NULL,
    MESSAGE VARCHAR(512) NOT NULL,
    LINK_URL VARCHAR(1024),
    CONSTRAINT FK_ANNOUNCEMENT_CONTENT_ANNOUNCEMENT FOREIGN KEY (ANNOUNCEMENT_ID)
        REFERENCES ANNOUNCEMENTS (ID)
);

DROP TABLE IF EXISTS ANNOUNCEMENT_HISTORY CASCADE;
CREATE TABLE ANNOUNCEMENT_HISTORY (
    ID UUID PRIMARY KEY,
    ANNOUNCEMENT_ID UUID NOT NULL,
    CATEGORY VARCHAR(128),
    POST_DATE_TIME TIMESTAMP WITH TIME ZONE NOT NULL,
    EXPIRE_DATE_TIME TIMESTAMP WITH TIME ZONE,
    DISPLAY_PRIORITY INT NOT NULL,
    CREATED_AT TIMESTAMP WITH TIME ZONE NOT NULL,
    CHANGED_BY VARCHAR(256) NOT NULL,
    OPERATION_TYPE INT NOT NULL,
    CONSTRAINT FK_ANNOUNCEMENT_HISTORY_ANNOUNCEMENT FOREIGN KEY (ANNOUNCEMENT_ID)
        REFERENCES ANNOUNCEMENTS (ID)
);

DROP TABLE IF EXISTS ANNOUNCEMENT_CONTENT_HISTORY CASCADE;
CREATE TABLE ANNOUNCEMENT_CONTENT_HISTORY (
    ID UUID PRIMARY KEY,
    ANNOUNCEMENT_HISTORY_ID UUID NOT NULL,
    LANGUAGE_CODE VARCHAR(8) NOT NULL,
    TITLE VARCHAR(256) NOT NULL,
    MESSAGE VARCHAR(512) NOT NULL,
    LINK_URL VARCHAR(1024),
    CONSTRAINT FK_ANNOUNCEMENT_CONTENT_HISTORY_ANNOUNCEMENT_HISTORY FOREIGN KEY (ANNOUNCEMENT_HISTORY_ID)
        REFERENCES ANNOUNCEMENT_HISTORY (ID)
);
