# テスト

本アーキテクチャにおいて、Maia OSS版が想定するテストのあり方に付いて示します。
なお、v0.1では、サーバーサイドアプリケーションのテストにのみ注目して記載します。

<!-- ## テストレベル

- テストレベルをどう定義するかの一般的な内容。
- 単体テスト、結合テスト、システムテスト、受入テストの役割と基本方針。
- 結合テスト以降にあまり踏み込む必要はない。本アーキテクチャ解説でも、結合テスト以降の具体的な実現方法には言及しない。
- 単テについては、CIで回すことを意識した上で、軽量で実行環境に依存しないテストを作成することを言及する。 -->

## 動的テスト

### 利用ライブラリ

- 動的テストで使用するOSSライブラリの簡単な解説。
    - JUnit
    - Spring Test
    - H2 Database

### テスト対象

- どこを対象にどうやってテストするかを図または表で示す。
- サーバーサイドの各レイヤーにおいて、テスト対象コンポーネントとテスト実装方法概要
    - v0.1ではサーバーサイドアプリケーションのみ注目。
    - プレゼンテーション層
        - テスト対象：Controller
        - 実装方針：JUnitとSpringのMockMVCを利用して各メソッドを通したリクエストのE2Eテストを実装する。
    - アプリケーションコア層
        - テスト対象：Domain Model / Domain Service / Application Service
        - 実装方針：JUnitを利用して業務ロジックの正常動作を担保するテストを実装する。
    - インフラストラクチャ層
        - テスト対象：なし
        - 実装方針：単独での単体テストは実装しない。ControllerからのE2Eテストを通して品質を担保する。
    - システム共通部品
        - テスト対象：全部品
        - 実装方針：JUnitを利用して共通部品の正常動作を担保するテストを実装する。
    - プレゼンテーション層およびアプリケーションコア層のより具体的なテスト実装方法は、[サーバーサイドにおける単体テスト](#サーバーサイドにおける単体テスト)を参照のこと。

### 単体テスト

アプリケーションコア層の各クラスを対象とした単体テストの実装および実施について記載します。

- 基本方針
    - 機能面のテストは可能な限りJUnitに寄せる。
    - 依存コンポーネントやミドルウェアはモック化し、可能な限り疎結合なテストを実現する。

- 実装例
    - Domain Serviceで一例。
    - テストメソッドの命名規則なども軽く解説。

### E2Eテスト

プレゼンテーション層では、Spring TestのMockMVCを活用してJUnit上でE2Eテストを行います。
このE2Eテストの実装および実施について記載します。

- 基本方針
    - Spring TestのMockMVCを活用して、実際にリクエストを受けた際のアプリケーション全体の動作をテストする。
    - アプリケーションコア層やインフラストラクチャ層の依存コンポーネントはモック化せず、完成済みのものを使用する。
    - 結果が実行環境に依存しないようにインメモリのH2 Databaseを利用する。

- 実装例
    - Controllerで一例。
    - テストメソッドの命名規則なども軽く解説。

## 静的テスト

静的テストの実装および実施について記載します。

### サーバーサイドにおける静的テスト

サーバーサイドにおける静的テストの実装方針を示します。

- 利用ライブラリ
    - 静的テストで使用するOSSライブラリの簡単な解説。
        - CheckStyle
        - SpotBugs

- 基本方針
    - CheckStyleのルールはGoogleが提供しているルールを基本とし、一部日本語コメントやIDEとのミスマッチ部分を修正。
    - SpotBugsのルールはSpotBugsデフォルトルールを使用。

- カスタマイズポイント
    - プロジェクトでのカスタマイズポイントがあれば言及。

<!-- ### クライアントサイド における静的テスト -->
