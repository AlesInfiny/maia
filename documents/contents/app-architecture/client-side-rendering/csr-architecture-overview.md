# CSRアーキテクチャ概要

Maia OSS 版において、クライアントサイドレンダリング方式のWebアプリケーションを構築する際に想定しているアーキテクチャの概要について説明します。

## 技術スタック

本アーキテクチャを構成する主なライブラリを以下に示します。

- 概要編で挙げた図をライブラリレベルまで詳細化した図。
- このレベル <https://terasolunaorg.github.io/guideline/5.7.0.RELEASE/ja/Overview/FrameworkStack.html#software-framework>
- クライアント側も含めて記載する。

### 利用ライブラリ

- 技術スタックの図で記載したライブラリ一つ一つの説明。
- Spring系ライブラリ、という書き方ではなく、実際にサンプルAPに組み込むものを具体的に書く。
    - 基本的には簡易な機能説明でよいが、プロジェクト側で設定が必要なものなどはある程度具体的な使い方まで説明。（今回は書かないが、Spring Securityなど）

## アプリケーションアーキテクチャ

- 本アーキテクチャの全体概要図。以下のことが伝わるように
    - クリーンアーキテクチャを基本としていること
    - アプリケーションコア層/プレゼンテーション層/インフラストラクチャ層の各名称と依存関係
    - 各層に含まれる主要なコンポーネント（Controller、Domain Modelなど重要なものだけ。図が煩雑になりすぎる場合は、次節で解説しているので割愛も可）
    - システム共通機能は、ここには出てこなくてよい（役割としては単なる部品であり、アーキテクチャ図に含めると説明しにくい。）
- クリーンアーキテクチャ、レイヤードアーキテクチャ、ＤＤＤの知識は前提にしてよい（リンク先だけ提示）

## レイヤー構造詳細

- 各レイヤーとそれを構成するコンポーネントの役割を解説。
- 各種DTOなども含める。
- レイヤーをまたぐコンポーネントの依存関係も示す。とくにRepository関連は分かりやすいように図示。
- ここを参考に <http://terasolunaorg.github.io/guideline/current/ja/Overview/ApplicationLayering.html>

### プロジェクト構成とのマッピング

- Maia OSS 版が推奨する Java プロジェクトの構成（マルチプロジェクト構成）と各レイヤーのマッピング。
- 各レイヤーに相当するプロジェクトの内部構成についても簡単に示す。（ディレクトリ構造を示す程度でよい）
- システム共通機能についても軽く触れる。
    - どの層からも参照される共通機能を提供する。
    - アプリケーションコア層に実装してもよいが、特に中規模以上の開発などにおいてシステム共通化チームからの提供物を別ライブラリとして分けておいた方が保守性が高まると考えられるため、別プロジェクトにすることを推奨。
- 参考 <http://terasolunaorg.github.io/guideline/current/ja/Overview/ApplicationLayering.html#application-layering-project-structure>

## 全体機能方針

アプリケーション全体の関心事となる各種機能の実装方針を説明します。

### 例外処理

### ログ出力

### メッセージ管理

<!-- ### トランザクション管理 -->

### 入力値検査

<!-- ### セキュリティ対策 -->
